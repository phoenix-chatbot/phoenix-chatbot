<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phoenix Chatbot</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">

    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-xxxxxxxxxxxxxxxx"
     crossorigin="anonymous"></script>
</head>
<body class="bg-light">

    <!-- Banner Ad -->
    <div class="container my-3 text-center">
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-xxxxxxxxxxxxxxxx"
             data-ad-slot="1234567890"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
        <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </div>

    <div class="container mt-5">
        <h1 class="text-center text-primary">ðŸ”¥ Phoenix Chatbot ðŸ”¥</h1>
        <div class="card shadow p-4 mt-4">
            <div id="chat-box" class="border rounded p-3 mb-3 bg-white" style="height: 400px; overflow-y: scroll;">
                <p><b>Bot:</b> Hello! Type "hi" or "xup" to start chatting.</p>
            </div>
            <form id="chat-form" class="d-flex">
                <input type="text" id="user-input" class="form-control me-2" placeholder="Type your message..." autocomplete="off">
                <button type="submit" class="btn btn-primary">Send</button>
            </form>
        </div>
    </div>

    <!-- Bottom Ad -->
    <div class="container my-4 text-center">
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-5149547050862927"
             data-ad-slot="3571851756"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
        <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </div>

    <script>
        const form = document.getElementById('chat-form');
        const input = document.getElementById('user-input');
        const chatBox = document.getElementById('chat-box');

        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            const userMessage = input.value.trim();
            if (!userMessage) return;

            // Show user message
            const userPara = document.createElement("p");
            userPara.innerHTML = `<b>You:</b> ${userMessage}`;
            chatBox.appendChild(userPara);

            // Send to backend
            const res = await fetch('/get', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({message: userMessage})
            });
            const data = await res.json();

            // Show bot reply
            const botPara = document.createElement("p");
            botPara.innerHTML = `<b>Bot:</b> ${data.reply}`;
            chatBox.appendChild(botPara);

            chatBox.scrollTop = chatBox.scrollHeight;
            input.value = '';
        });
    </script>
</body>
</html>
