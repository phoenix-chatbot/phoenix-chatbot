<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Phoenix Chatbot</title>

  <!-- Google AdSense (replace client id below) -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5149547050862927"
     crossorigin="anonymous"></script>

  <style>
    body { font-family: Arial, sans-serif; background:#f4f4f6; display:flex; align-items:center; justify-content:center; height:100vh; margin:0; }
    .card { width:420px; background:#fff; padding:18px; border-radius:10px; box-shadow:0 8px 30px rgba(0,0,0,0.08); }
    #chatbox { height:340px; overflow:auto; border:1px solid #eee; padding:10px; margin-bottom:10px; }
    .user { text-align:right; color:#0a58ca; margin:6px 0; }
    .bot  { text-align:left; color:#333; margin:6px 0; }
    input { width:76%; padding:8px; border:1px solid #ddd; border-radius:6px; }
    button { padding:9px 12px; margin-left:6px; background:#ff6600; color:#fff; border:none; border-radius:6px; cursor:pointer; }
    .ad-box { margin-top:12px; }
  </style>
</head>
<body>
  <div class="card">
    <h3>ðŸ”¥ Phoenix Chatbot</h3>
    <div id="chatbox"></div>

    <div>
      <input id="userInput" placeholder="Type your question..." />
      <button id="sendBtn">Send</button>
    </div>

    <!-- Ad placeholder (bottom) -->
    <div class="ad-box">
      <ins class="adsbygoogle"
           style="display:block"
           data-ad-client="pub-5149547050862927"
           data-ad-slot="7559198224"
           data-ad-format="auto"
           data-full-width-responsive="true"></ins>
      <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
    </div>
  </div>

  <script>
    const sendBtn = document.getElementById('sendBtn');
    const userInput = document.getElementById('userInput');
    const chatbox = document.getElementById('chatbox');

    async function sendMessage() {
      const txt = userInput.value.trim();
      if (!txt) return;
      chatbox.innerHTML += `<div class="user"><b>You:</b> ${escapeHtml(txt)}</div>`;
      userInput.value = '';
      chatbox.scrollTop = chatbox.scrollHeight;

      try {
        const res = await fetch('/get', {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({message: txt})
        });
        const data = await res.json();
        chatbox.innerHTML += `<div class="bot"><b>Phoenix:</b> ${escapeHtml(data.reply)}</div>`;
        chatbox.scrollTop = chatbox.scrollHeight;
      } catch (err) {
        chatbox.innerHTML += `<div class="bot"><b>Phoenix:</b> Sorry, something went wrong.</div>`;
      }
    }

    function escapeHtml(s) {
      return s.replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;');
    }

    sendBtn.addEventListener('click', sendMessage);
    userInput.addEventListener('keydown', e => { if (e.key === 'Enter') sendMessage(); });
  </script>
</body>
</html>
